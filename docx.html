<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Infos de connexion</title>
<style>
  body {
    margin:0; padding:0;
    background: black;
    color: white;
    font-weight: bold;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    user-select: none;
  }
  #info-list {
    font-size: 2rem;
    line-height: 2.5rem;
    text-align: center;
    max-width: 90vw;
  }
</style>
</head>
<body>
  <div id="info-list"></div>

<script>
async function getIPData() {
  try {
    // 1. IP publique
    const ipRes = await fetch('https://api.ipify.org?format=json');
    const ipJson = await ipRes.json();
    const ip = ipJson.ip;

    // 2. Données géo + ISP via ipwhois
    const geoRes = await fetch(`https://ipwhois.app/json/${ip}`);
    const geoJson = await geoRes.json();

    if (geoJson.success === false) throw new Error("Erreur API IP");

    return {
      ip: geoJson.ip,
      country: geoJson.country,
      org: geoJson.org || geoJson.isp || "Inconnu"
    };
  } catch {
    return { ip: "Non disponible", country: "-", org: "-" };
  }
}

function getBrowserInfo() {
  return {
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    language: navigator.language,
    languages: navigator.languages ? navigator.languages.join(', ') : navigator.language,
    cookieEnabled: navigator.cookieEnabled ? "oui" : "non",
    doNotTrack: navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack || "non défini",
    screenResolution: `${window.screen.width} x ${window.screen.height}`,
    colorDepth: window.screen.colorDepth + " bits",
    pixelRatio: window.devicePixelRatio,
    cpuCores: navigator.hardwareConcurrency || "inconnu",
    ram: navigator.deviceMemory ? navigator.deviceMemory + " Go" : "inconnu",
    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone || "inconnu",
    darkMode: window.matchMedia('(prefers-color-scheme: dark)').matches ? "oui" : "non",
    online: navigator.onLine ? "oui" : "non",
    touchSupport: ('ontouchstart' in window) ? "oui" : "non",
    webGLRenderer: getWebGLRenderer() || "inconnu",
    localTime: new Date().toLocaleTimeString(),
    fullDate: new Date().toLocaleString()
  };
}

function getWebGLRenderer() {
  try {
    const canvas = document.createElement('canvas');
    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
    if (!gl) return null;
    const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
    if (debugInfo) {
      return gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
    }
    return null;
  } catch {
    return null;
  }
}

async function displayInfos() {
  const infoList = document.getElementById('info-list');
  const ipData = await getIPData();
  const browserInfo = getBrowserInfo();

  const infos = [
    `🌐 IP : ${ipData.ip}`,
    `🌎 Pays : ${ipData.country}`,
    `📡 Fournisseur : ${ipData.org}`,
    `🧭 Navigateur (User Agent) : ${browserInfo.userAgent}`,
    `🖥️ Système (plateforme) : ${browserInfo.platform}`,
    `🗣️ Langue principale : ${browserInfo.language}`,
    `🌐 Langues préférées : ${browserInfo.languages}`,
    `🍪 Cookies activés : ${browserInfo.cookieEnabled}`,
    `🚫 Do Not Track : ${browserInfo.doNotTrack}`,
    `🖼️ Résolution écran : ${browserInfo.screenResolution}`,
    `🎨 Profondeur couleur : ${browserInfo.colorDepth}`,
    `📱 Pixel Ratio : ${browserInfo.pixelRatio}`,
    `🧠 CPU Cores : ${browserInfo.cpuCores}`,
    `💾 RAM approximative : ${browserInfo.ram}`,
    `🕒 Fuseau horaire : ${browserInfo.timezone}`,
    `🌙 Mode sombre préféré : ${browserInfo.darkMode}`,
    `📶 En ligne : ${browserInfo.online}`,
    `🤏 Support tactile : ${browserInfo.touchSupport}`,
    `🎮 GPU (WebGL Renderer) : ${browserInfo.webGLRenderer}`,
    `⏰ Heure locale : ${browserInfo.localTime}`,
    `📅 Date complète : ${browserInfo.fullDate}`
  ];

  let i = 0;
  const delay = 1200; // ms entre chaque info

  function showNext() {
    if (i < infos.length) {
      const line = document.createElement('div');
      line.textContent = infos[i];
      infoList.appendChild(line);
      i++;
      setTimeout(showNext, delay);
    }
  }

  showNext();
}

displayInfos();
</script>
</body>
</html>
